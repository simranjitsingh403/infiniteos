import{r as s,j as e,$ as O}from"./client-DVrblGvH.js";import{u as w,a as A,T as E}from"./web-FDxr5o42.js";import{u as k,N as B}from"./NavigationBar-D0Oz531L.js";import{g as L}from"./maths-BcBSyK5V.js";import{u as T,m as F,a as b,S as I}from"./Video-BRQ7BetD.js";import{u as y}from"./hook-Dy1HR1NH.js";import{a as P}from"./index-CvvdEzMW.js";import{A as W}from"./AnimatedImage-BUnhYUfO.js";import{B as j}from"./Button-BCt0k8lN.js";import{F as M}from"./chevron-right-rLNBw_Rz.js";import{C as $}from"./Card-COR0P2_l.js";const q="_allOffersCard_qsba1_23",z="_image_qsba1_104",g={allOffersCard:q,image:z},C=s.forwardRef((o,l)=>{const{t:i}=y(),f=s.useRef(null),t=s.useRef(null),{add:c}=T(),m=()=>{t.current&&t.current.onMouseEnter()},a=()=>{t.current&&t.current.onMouseLeave()};return e.jsxs(O,{ref:F([l,c("all-offers",0)]),"data-mouse-only":!0,className:g.allOffersCard,"data-object":"grid","data-config":"card","data-border-radius":"12",style:{"--hovercolor":"#fff"},"data-color":"#888",href:"",onMouseEnter:m,onMouseLeave:a,children:[e.jsx(W,{ref:t,folder:"offers",animationId:P.ALL_OFFERS,imagesCount:45,containerClassName:g.image}),e.jsx("p",{children:i("app.ui.discover_offers")}),e.jsx(j,{ref:f,text:i("app.ui.see_all_offers"),theme:"primary",className:g.link,as:"div",children:e.jsx(j.Icon,{children:e.jsx(M,{})})})]})});C.displayName="AllOffersCard";const Y="_listWrapper_k1r5a_23",G="_title_k1r5a_36",K="_embla_k1r5a_48",D="_list_k1r5a_23",H="_navigationBar_k1r5a_85",n={listWrapper:Y,title:G,embla:K,list:D,navigationBar:H},oe=({offers:o,title:l})=>{const{t:i}=y(),[f,t]=s.useState(0),c=s.useRef(null),[m,a]=k({active:!0,breakpoints:{"(min-width: 1024px)":{active:!1}}}),[x,_]=w();s.useEffect(()=>{if(a){const r=()=>t(a.selectedScrollSnap());return a.on("select",r),r(),()=>{a.off("select",r)}}},[a]);const N=()=>{a&&a.scrollPrev()},R=()=>{a&&a.scrollNext()};return A(()=>{let r;return(async()=>{await b.loading,await new Promise(p=>setTimeout(p,0));const u=L.timeline({paused:!0}),S=x.current.map(p=>{var h,v;return(v=(h=b.webgl)==null?void 0:h.domSync.rectangles.get(p))==null?void 0:v.object}).filter(Boolean);u.fromTo(x.current,{opacity:0,"--yPercent":"10%"},{opacity:1,"--yPercent":"0%",duration:1.4,stagger:.1,ease:"immg.zoomOut"},.4),u.fromTo(S,{translateY:-.1,fade:0},{translateY:0,fade:1,duration:1.4,stagger:.1,ease:"immg.zoomOut"},.4),r=I.ScrollTrigger.create({trigger:c.current,animation:u,toggleActions:"play complete none none"})})(),()=>{r==null||r.kill()}}),e.jsx("div",{ref:c,className:n.listWrapper,"data-anchor":"offers-list",children:e.jsxs("div",{className:"container",children:[e.jsx(E,{className:n.title,tag:"h2",children:l||i("app.offer.content_title")}),e.jsx("div",{ref:m,className:n.embla,children:e.jsxs("div",{className:n.list,children:[o.map((r,d)=>e.jsx($,{ref:_(d),offer:r,withKeywords:!1},d)),e.jsx(C,{ref:_(o.length)})]})}),o.length>1&&e.jsx(B,{currentIndex:f,itemsLength:o.length+1,className:n.navigationBar,onPrev:N,onNext:R})]})})};export{oe as C};
